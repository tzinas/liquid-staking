\newif\iftwocolumn
\newif\ifonecolumn
\newif\iflncs
\newif\ifccs
\newif\ifproceedings
\newif\ifanonymous
\newif\iftoday
\todaytrue
%\ccstrue % pick one: LNCS or CCS (and `make clean`)
\lncstrue
\proceedingstrue
%\anonymoustrue

\ifccs
  \twocolumntrue
\fi
\iflncs
  \onecolumntrue
\fi

\iflncs
\documentclass[11pt]{llncs}
\fi
\ifccs
\documentclass[sigconf, anonymous]{acmart}
\input{ccs-preamble}
\fi

\usepackage{preamble}

\begin{document}
\import{./}{frontpage.tex}

\import{./}{body.tex}

\ifproceedings
\else
  \vfill
\fi
\iflncs
\thispagestyle{plain}
\fi

\ifccs
  \bibliographystyle{abbrv}
\else
  \bibliographystyle{abbrv}
\fi

\pdfbookmark[section]{References}{references}
\bibliography{biblio,crypto,pubs}


\ifanonymous\else
  \ifproceedings
  \else
    \pagebreak
  \fi
\import{./}{acknowledgements.tex}
\fi

\ifproceedings
\pdfbookmark[section]{Appendix}{appendix}
\iflncs
  \pagebreak
\fi

\else
  \section*{Appendix}
  \appendix
  \import{./}{lsm.tex}
  %\import{./}{comparison.tex}
  \import{./}{contract.tex}
\fi

\end{document}
